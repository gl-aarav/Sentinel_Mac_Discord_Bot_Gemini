<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sentinel Discord Bot</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #5865f2; /* Brighter Discord purple-blue */
        --secondary-color: #2c2f33; /* Dark gray */
        --background-color: #1e1f22; /* Darker background */
        --text-color: #dcddde; /* Light gray text */
        --card-background: #282b2f; /* Darker card background */
        --border-color: #18191c; /* Almost black for borders */
        --success-color: #57f287; /* Brighter green */
        --error-color: #ed4245; /* Brighter red */
        --link-color: #57f287; /* Green for links */
      }

      /* Base styles */
      body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        background-color: var(--background-color);
        color: var(--text-color);
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* Utility classes for animations */
      .fade-in {
        animation: fadeIn 1s ease-in-out;
      }

      .slide-up {
        animation: slideUp 0.8s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      
      /* New for command card hover effect */
      @keyframes pulseShadow {
        0% {
          box-shadow: 0 0 15px rgba(88, 101, 242, 0.2);
        }
        50% {
          box-shadow: 0 0 25px rgba(88, 101, 242, 0.6);
        }
        100% {
          box-shadow: 0 0 15px rgba(88, 101, 242, 0.2);
        }
      }

      /* Vanta.js background container */
      #vanta-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }

      /* Glassmorphism effect on header */
      header {
        background-color: rgba(44, 47, 51, 0.5);
        backdrop-filter: blur(5px);
        padding: 1rem 0;
        border-bottom: 2px solid var(--primary-color);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1.5rem;
      }

      .logo {
        font-family: 'Roboto Mono', monospace;
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
        letter-spacing: -1px;
      }

      nav ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        gap: 2.5rem;
      }

      nav ul li a {
        color: var(--text-color);
        text-decoration: none;
        font-weight: 600;
        transition: color 0.3s ease, transform 0.3s ease;
        position: relative;
      }

      nav ul li a::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 2px;
        bottom: -5px;
        left: 0;
        background-color: var(--primary-color);
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      nav ul li a:hover {
        color: var(--primary-color);
        transform: translateY(-2px);
      }

      nav ul li a:hover::after {
        transform: scaleX(1);
      }

      /* Hero section styles */
      .hero {
        text-align: center;
        padding: 6rem 1.5rem 4rem;
        background: linear-gradient(
          135deg,
          rgba(88, 101, 242, 0.1) 0%,
          rgba(30, 31, 34, 1) 50%
        );
        border-bottom: 2px solid var(--card-background);
        position: relative;
        overflow: hidden;
      }

      .hero h1 {
        font-size: 3.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--text-color);
        text-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
      }

      .hero p {
        font-size: 1.25rem;
        color: #b9bbbe;
        max-width: 700px;
        margin: 0 auto 2rem;
      }

      .cta-button {
        display: inline-block;
        background-color: var(--primary-color);
        color: #fff;
        padding: 0.8rem 2rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 600;
        transition: background-color 0.3s ease, transform 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      .cta-button:hover {
        background-color: #4752c4;
        transform: translateY(-3px);
      }

      .container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 1.5rem;
      }

      /* Glassmorphism effect on sections */
      section {
        background-color: rgba(40, 43, 47, 0.5);
        backdrop-filter: blur(4px);
        padding: 2.5rem;
        margin-bottom: 2rem;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border-color);
      }

      h2 {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        text-align: center;
        margin-bottom: 2rem;
        position: relative;
      }

      h2::after {
        content: '';
        position: absolute;
        width: 80px;
        height: 4px;
        background-color: var(--primary-color);
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 2px;
      }

      .bot-status {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .bot-status p {
        font-family: 'Roboto Mono', monospace;
        font-size: 1.1rem;
        margin: 0.5rem 0;
      }

      /* Enhanced status indicator animation */
      .status-indicator {
        display: inline-block;
        width: 14px;
        height: 14px;
        border-radius: 50%;
        margin-right: 8px;
        vertical-align: middle;
        box-shadow: 0 0 10px var(--status-color);
        animation: pulse 2s infinite;
      }

      .status-online {
        --status-color: var(--success-color);
        background-color: var(--status-color);
      }

      .status-offline {
        --status-color: var(--error-color);
        background-color: var(--status-color);
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          box-shadow: 0 0 0 0 var(--status-color);
        }
        70% {
          transform: scale(1.1);
          box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
        }
      }

      .commands-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1.5rem;
      }

      .command-card {
        background-color: rgba(44, 47, 51, 0.4);
        backdrop-filter: blur(3px);
        padding: 1.5rem;
        border-radius: 10px;
        border: 1px solid var(--border-color);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .command-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 0 25px rgba(88, 101, 242, 0.4);
      }

      .command-card h3 {
        font-family: 'Roboto Mono', monospace;
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--primary-color);
      }

      .command-card p {
        font-size: 0.95rem;
        color: #aaa;
      }

      .contact-links {
        text-align: center;
      }

      .contact-links a {
        font-weight: 600;
        text-decoration: none;
        transition: color 0.3s ease;
      }

      a {
        color: var(--link-color);
      }

      .contact-links a:hover {
        color: #4752c4;
        text-decoration: underline;
      }

      footer {
        text-align: center;
        padding: 1.5rem 0;
        background-color: rgba(44, 47, 51, 0.5);
        backdrop-filter: blur(5px);
        border-top: 1px solid var(--border-color);
        margin-top: 2rem;
        color: #72767d;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div id="vanta-bg"></div>

    <header class="fade-in">
      <nav>
        <a href="#" class="logo">Sentinel</a>
        <ul>
          <li><a href="#status">Status</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#commands">Commands</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </header>

    <div class="hero fade-in">
      <h1>Sentinel Bot</h1>
      <p>
        An advanced AI-powered assistant designed to enhance your Discord server
        experience with intelligent and engaging commands.
      </p>
    </div>

    <main class="container">
      <section id="status" class="bot-status slide-up">
        <h2>Bot Status</h2>
        <p>
          Status: <span id="bot-status"
            ><span class="status-indicator status-offline"></span> Offline</span
          >
        </p>
        <p>Latency: <span id="bot-latency">N/A</span></p>
        <p>Uptime: <span id="bot-uptime">N/A</span></p>
      </section>

      <section id="about" class="slide-up">
        <h2>About Sentinel</h2>
        <p>
          The Sentinel Discord Bot is an advanced AI-powered assistant designed
          to enhance your Discord server experience. Leveraging the power of
          Google's Gemini AI, it offers a wide range of functionalities from
          general chat and moderation to fun and utility commands.
        </p>
        <p>
          With features like intelligent response generation, comprehensive
          moderation tools, and interactive commands, Sentinel aims to make
          server management easier and user interaction more engaging. It's
          built to be flexible and helpful, adapting to your server's needs.
        </p>
      </section>

      <section id="commands" class="slide-up">
        <h2>Commands</h2>
        <div id="commands-list" class="commands-list">
          <div class="command-card slide-up">
            <h3>/help</h3>
            <p>Shows a list of all available commands.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/askquestion &lt;question&gt;</h3>
            <p>Ask AI a question with context.</p>
          </div>
          <div class="command-card slide-up">
            <h3>!chat &lt;message&gt;</h3>
            <p>Ask AI via AI (no context).</p>
          </div>
          <div class="command-card slide-up">
            <h3>/setcontext &lt;text&gt; (Admin)</h3>
            <p>Update AI response behavior.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/getcontext (Admin)</h3>
            <p>Get AI context.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/summarize &lt;amount&gt; (Admin)</h3>
            <p>Summarize recent messages.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/kick &lt;user&gt; [reason] (Admin)</h3>
            <p>Kick a user.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/ban &lt;user&gt; [reason] (Admin)</h3>
            <p>Ban a user.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/timeout &lt;user&gt; &lt;duration&gt; (Admin)</h3>
            <p>Time out a user for a duration.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/untimeout &lt;user&gt; (Admin)</h3>
            <p>Remove a timeout.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/warn &lt;user&gt; &lt;reason&gt; (Admin)</h3>
            <p>Warn a user.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/nick &lt;user&gt; &lt;nickname&gt; (Admin)</h3>
            <p>Change a user's nickname.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/slowmode &lt;duration&gt; (Admin)</h3>
            <p>Set channel slowmode.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/lock (Admin)</h3>
            <p>Lock a channel.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/unlock (Admin)</h3>
            <p>Unlock a channel.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/delete &lt;amount&gt; (Admin)</h3>
            <p>Delete 1–100 recent messages.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/deleteall (Admin)</h3>
            <p>Purge recent messages.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/addrole &lt;role&gt; &lt;user&gt; (Admin)</h3>
            <p>Assign a role to a user.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/removerole &lt;role&gt; &lt;user&gt; (Admin)</h3>
            <p>Remove a role from a user.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/createrole &lt;name&gt; (Admin)</h3>
            <p>Create a new role.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/deleterole &lt;name&gt; (Admin)</h3>
            <p>Delete a role.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/renamerole &lt;old&gt; &lt;new&gt; (Admin)</h3>
            <p>Rename a role.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/createchannel &lt;name&gt; (Admin)</h3>
            <p>Create a text channel.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/deletechannel &lt;#channel&gt; (Admin)</h3>
            <p>Delete a text channel.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/createprivatechannel &lt;user&gt; (Admin)</h3>
            <p>Private channel for a user + Admins.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/senddm &lt;user&gt; &lt;message&gt; (Admin)</h3>
            <p>Send a DM to a user.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/verify &lt;user&gt; (Admin)</h3>
            <p>Add the "Students" role to a user.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/ping</h3>
            <p>Check bot latency.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/userinfo [user]</h3>
            <p>Display user info.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/serverinfo</h3>
            <p>Display server info.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/avatar [user]</h3>
            <p>Get a user's avatar.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/embed &lt;title&gt; &lt;description&gt; [color]</h3>
            <p>Send a custom embed message.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/poll &lt;question&gt;</h3>
            <p>Create a yes/no poll.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/8ball &lt;question&gt;</h3>
            <p>Ask the 8-ball.</p>
          </div>
          <div class="command-card slide-up">
            <h3>/randomfact</h3>
            <p>Get a random fact.</p>
          </div>
        </div>
      </section>

      <section id="contact" class="slide-up">
        <h2 class="contact-links">Contact & Support</h2>
        <p>
          For support, feature requests, or any questions, please join our
          Discord server:
          <a
            href="https://discord.gg/ZJNQQ3YT"
            target="_blank"
            rel="noopener noreferrer"
            >https://discord.gg/ZJNQQ3YT</a
          >
          or contact us via email at
          <a href="mailto:gl.aarav@gmail.com">gl.aarav@gmail.com</a>.
        </p>
        <p>
          We're always looking to improve Sentinel and appreciate your feedback!
        </p>
      </section>
    </main>

    <footer class="fade-in">
      <p>
        Sentinel Discord Bot Project. Made by Aarav Goyal.
      </p>
    </footer>

    <script>
      // The original JavaScript is retained and integrated here
      document.addEventListener('DOMContentLoaded', () => {
        const botStatusSpan = document.getElementById('bot-status');
        const botLatencySpan = document.getElementById('bot-latency');
        const botUptimeSpan = document.getElementById('bot-uptime');
        const commandsListDiv = document.getElementById('commands-list');

        let initialUptime = 0; // Store initial uptime from the bot
        let uptimeIntervalId = null; // To store the interval ID for uptime updates

        function updateUptimeDisplay(totalSeconds) {
          const days = Math.floor(totalSeconds / (3600 * 24));
          const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
          const minutes = Math.floor((totalSeconds % 3600) / 60);
          const seconds = totalSeconds % 60;

          let uptimeString = '';
          if (days > 0) {
            uptimeString += `${days}d `;
          }
          if (hours > 0 || days > 0) {
            uptimeString += `${hours}h `;
          }
          if (minutes > 0 || hours > 0 || days > 0) {
            uptimeString += `${minutes}m `;
          }
          uptimeString += `${seconds}s`;
          botUptimeSpan.textContent = uptimeString.trim();
        }

        async function fetchBotStatus() {
          try {
            const response = await fetch('/api/bot-status');
            const data = await response.json();

            if (data.status === 'online') {
              botStatusSpan.innerHTML = `<span class="status-indicator status-online"></span> Online`;
              botLatencySpan.textContent = `${data.latency}ms`;
              initialUptime = Math.floor(data.uptime / 1000);
              updateUptimeDisplay(initialUptime);

              if (uptimeIntervalId) {
                clearInterval(uptimeIntervalId);
              }
              let currentUptime = initialUptime;
              uptimeIntervalId = setInterval(() => {
                currentUptime++;
                updateUptimeDisplay(currentUptime);
              }, 1000);
            } else {
              botStatusSpan.innerHTML = `<span class="status-indicator status-offline"></span> Offline`;
              botLatencySpan.textContent = 'N/A';
              botUptimeSpan.textContent = 'N/A';
              if (uptimeIntervalId) {
                clearInterval(uptimeIntervalId);
                uptimeIntervalId = null;
              }
            }
          } catch (error) {
            console.error('Error fetching bot status:', error);
            botStatusSpan.innerHTML = `<span class="status-indicator status-offline"></span> Offline`;
            botLatencySpan.textContent = 'N/A';
            botUptimeSpan.textContent = 'N/A';
          }
        }

        async function fetchCommands() {
          try {
            const response = await fetch('/api/commands');
            const commands = await response.json();
            commandsListDiv.innerHTML = ''; 

            commands.forEach((cmd) => {
              const commandCard = document.createElement('div');
              commandCard.classList.add('command-card', 'slide-up');
              commandCard.innerHTML = `
                  <h3>${cmd.name}</h3>
                  <p>${cmd.description}</p>
              `;
              commandsListDiv.appendChild(commandCard);
            });
          } catch (error) {
            console.error('Error fetching commands:', error);
            commandsListDiv.innerHTML = `<p style="color: var(--error-color);">Failed to load commands.</p>`;
          }
        }

        fetchBotStatus();
        fetchCommands();
        setInterval(fetchBotStatus, 30000);
      });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
    <script>
      VANTA.NET({
        el: "#vanta-bg",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0x5865f2,
        backgroundColor: 0x1e1f22,
        points: 10.00,
        maxDistance: 20.00,
        spacing: 15.00
      });
    </script>
  </body>
</html>